(this.webpackJsonposa1=this.webpackJsonposa1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),o=t(2),u=t(4),s=t.n(u),i="/api/persons",l={getAll:function(){return s.a.get(i).then((function(e){return e.data}))},create:function(e){return s.a.post(i,e).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},put:function(e,n){return s.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))}},d=t(0),b=function(e){var n=e.redMessage;return null===n?null:Object(d.jsx)("div",{className:"red",children:n})},j=function(e){var n=e.greenMessage;return null===n?null:Object(d.jsx)("div",{className:"green",children:n})},f=function(e){var n=e.id,t=e.person,c=e.number,r=e.searchName,a=e.setPersons,o=e.persons,u=e.setRedMessage,s=(e.setGreenMessage,t.toLowerCase()),i=r.toLowerCase();return!0===s.includes(i)?Object(d.jsx)(h,{id:n,person:t,number:c,persons:o,setPersons:a,setRedMessage:u}):null},h=function(e){var n=e.id,t=e.person,c=e.number,r=e.setPersons,a=e.persons,o=e.setRedMessage;return Object(d.jsxs)("div",{children:[t," ",c,Object(d.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t,"?"))&&l.remove(n).then((function(e){o("Removed ".concat(t)),setTimeout((function(){o(null)}),5e3),r(a.filter((function(e){return e.id!==n})))})).catch((function(e){o("Information of ".concat(t," has already been removed from the server")),setTimeout((function(){o(null)}),5e3)}))},children:"delete"})]})},m=function(e){return Object(d.jsxs)("form",{onSubmit:e.addPerson,children:["name: ",Object(d.jsx)("input",{value:e.newName,onChange:e.handleContactChange}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(d.jsx)("button",{type:"submit",children:"add"})]})},g=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),u=Object(a.a)(r,2),s=u[0],i=u[1],h=Object(o.useState)(""),g=Object(a.a)(h,2),O=g[0],p=g[1],v=Object(o.useState)(""),x=Object(a.a)(v,2),w=x[0],C=x[1],N=Object(o.useState)(null),M=Object(a.a)(N,2),P=M[0],S=M[1],R=Object(o.useState)(null),k=Object(a.a)(R,2),T=k[0],y=k[1];Object(o.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),Object(d.jsx)(b,{redMessage:P}),Object(d.jsx)(j,{greenMessage:T}),"search: ",Object(d.jsx)("input",{value:w,onChange:function(e){console.log("search",e.target.value),C(e.target.value)}}),Object(d.jsx)(m,{addPerson:function(e){e.preventDefault();var n={name:s,number:O},r=t.map((function(e){return{name:e.name,id:e.id}})).filter((function(e){return e.name===s}));1===r.length&&window.confirm("".concat(s," is already added to phonebook,\n     replace with new number?"))&&(l.put(r[0].id,n).then((function(e){y("Replaced number of ".concat(s)),setTimeout((function(){y(null)}),5e3),c(t.map((function(n){return n.id!==r[0].id?n:e})))})),i(""),p("")),0===r.length&&(l.create(n).then((function(e){y("Added ".concat(n.name)),setTimeout((function(){y(null)}),5e3),c(t.concat(e))})).catch((function(e){S("".concat(e.response.data.error)),setTimeout((function(){S(null)}),5e3)})),i(""),p(""))},newName:s,handleContactChange:function(e){console.log(e.target.value),i(e.target.value)},newNumber:O,handleNumberChange:function(e){console.log(e.target.value),p(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)("ul",{children:t.map((function(e){return Object(d.jsx)(f,{id:e.id,person:e.name,number:e.number,searchName:w,persons:t,setPersons:c,setRedMessage:S},e.id)}))})]})};t(38);r.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.6e823e96.chunk.js.map